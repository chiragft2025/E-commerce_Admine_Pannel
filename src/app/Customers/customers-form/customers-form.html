<div class="form-card card shadow-sm p-4">

  <h2 class="mb-4">{{ isEdit ? "Edit Customer" : "New Customer" }}</h2>

  <form [formGroup]="form" (ngSubmit)="save()">

    <!-- Full Name -->
    <div class="mb-3">
      <label class="form-label">Full Name</label>
      <input type="text" class="form-control" formControlName="fullName" />

      <div class="text-danger small mt-1"
           *ngIf="form.get('fullName')?.touched && form.get('fullName')?.invalid && form.get('fullName')?.hasError('required')">
        * Full Name is required and cannot be more than 25 characters
      </div>

      <div class="text-danger small mt-1"
       *ngIf="form.get('fullName')?.touched && form.get('fullName')?.hasError('maxlength')">
    * Full Name cannot be more than {{ form.get('fullName')?.errors?.['maxlength']?.requiredLength }} characters
  </div>

      <!-- Duplicate error from server -->
      <div class="text-danger small mt-1"
           *ngIf="form.get('fullName')?.touched && form.get('fullName')?.hasError('duplicate')">
        * A customer with this full name already exists
      </div>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" class="form-control" formControlName="email" />

      <div class="text-danger small mt-1"
           *ngIf="form.get('email')?.touched && form.get('email')?.invalid && form.get('email')?.hasError('required')">
        * Email is required
      </div>

      <div class="text-danger small mt-1"
           *ngIf="form.get('email')?.touched && form.get('email')?.invalid && form.get('email')?.hasError('email')">
        * Please enter a valid email address
      </div>

      <!-- Duplicate error from server -->
      <div class="text-danger small mt-1"
           *ngIf="form.get('email')?.touched && form.get('email')?.hasError('duplicate')">
        * A customer with this email already exists
      </div>
    </div>

   <!-- Phone -->
<div class="mb-3">
  <label class="form-label">Phone</label>
  <input type="text" class="form-control" formControlName="phone" />

  <div class="text-danger small mt-1"
       *ngIf="form.get('phone')?.touched && form.get('phone')?.hasError('required')">
    * Phone is required
  </div>

  <div class="text-danger small mt-1"
       *ngIf="form.get('phone')?.touched && form.get('phone')?.hasError('minlength')">
    * Phone must be at least {{ form.get('phone')?.errors?.['minlength']?.requiredLength }} digits
  </div>

  <div class="text-danger small mt-1"
       *ngIf="form.get('phone')?.touched && form.get('phone')?.hasError('maxlength')">
    * Phone cannot be more than {{ form.get('phone')?.errors?.['maxlength']?.requiredLength }} digits
  </div>
</div>


<!-- Address -->
<div class="mb-3">
  <label class="form-label">Address</label>
  <textarea class="form-control" formControlName="address" rows="3"></textarea>

  <div class="text-danger small mt-1"
       *ngIf="form.get('address')?.touched && form.get('address')?.hasError('required')">
    * Address is required
  </div>
</div>


    <!-- Global server error (non-field) -->
    <div *ngIf="error" class="alert alert-danger small">
      {{ error }}
    </div>

    <!-- Buttons -->
    <div class="d-flex justify-content-end gap-2 mt-4">
      <button type="submit" class="btn btn-primary px-4" [disabled]="saving">
        <span *ngIf="!saving">{{ isEdit ? "Update" : "Create" }}</span>
        <span *ngIf="saving">
          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          Saving...
        </span>
      </button>

      <button type="button" class="btn btn-outline-secondary px-4" (click)="cancel()" [disabled]="saving">
        Cancel
      </button>
    </div>

  </form>
</div>
