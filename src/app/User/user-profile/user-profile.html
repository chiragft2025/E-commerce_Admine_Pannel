<div class="container py-3" [attr.aria-busy]="loading">
  <!-- Loading -->
  <div *ngIf="loading" class="text-center my-4" role="status" aria-live="polite">
    <div class="spinner-border" role="status" aria-hidden="true"></div>
    <div class="visually-hidden">Loadingâ€¦</div>
  </div>

  <!-- Error -->
  <div *ngIf="error && !loading" class="alert alert-danger" role="alert" aria-live="assertive">
    {{ error }}
  </div>

  <!-- Details card -->
  <div *ngIf="!loading && user" class="details-card card p-3 p-md-4" role="region" aria-label="User details">
    <div class="d-flex align-items-start justify-content-between mb-3 gap-3">
      <div>
        <h2 class="h5 mb-1">User Details</h2>
      </div>

      <div class="text-end">
        <div class="mb-1">Status</div>
        <span
          class="badge status-badge"
          [ngClass]="user.isActive ? 'bg-success' : 'bg-secondary'"
          aria-label="User status"
        >
          {{ user.isActive ? 'Active' : 'Inactive' }}
        </span>
      </div>
    </div>

    <div class="row g-3 mb-3">
      <div class="col-12 col-md-6">
        <div class="text-muted small">User ID</div>
        <div class="fw-semibold">{{ user?.id }}</div>
      </div>

      <div class="col-12 col-md-6">
        <div class="text-muted small">Username</div>
        <div class="fw-semibold">{{ user?.userName }}</div>
      </div>

      <div class="col-12 col-md-6">
        <div class="text-muted small">Email</div>
        <div>{{ user?.email }}</div>
      </div>

      <div class="col-12 col-md-6" *ngIf="user?.roles?.length">
        <div class="text-muted small">Roles</div>
        <div>
          <ng-container *ngFor="let r of user.roles; trackBy: user.role">
            <!-- handle role as string or object { name: string } -->
            <span class="badge bg-light text-dark border me-1 mb-1">
              {{ r.name}}
            </span>
          </ng-container>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-outline-secondary" routerLink="/">Back</button>
    </div>
  </div>
</div>
